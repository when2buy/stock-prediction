# Data Science Project Template

ğŸ§  **å¼€ç®±å³ç”¨**çš„ã€Œæ•°æ®ç§‘å­¦é¡¹ç›®æ¨¡æ¿ã€

> çŸ¥åç‚¼ä¸¹å¸ˆæœ‰äº‘ï¼š**åˆç†çš„ã€Œé¡¹ç›®ç»“æ„ã€æ˜¯æˆåŠŸçš„èµ·ç‚¹ï¼**

## 1 ç›®å½•ç®€ä»‹

```
.
â”œâ”€â”€ README.md          # ç®€ä»‹
â”œâ”€â”€ app                # åº”ç”¨
â”‚   â”œâ”€â”€ test.py
â”‚   â””â”€â”€ train.py
â”œâ”€â”€ notebook           # äº¤äº’ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ model              # æ¨¡å‹ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ data               # æ•°æ®
â”œâ”€â”€ util               # è¾…åŠ©
â”‚   â”œâ”€â”€ conf.py
â”‚   â”œâ”€â”€ log.py
â”‚   â”œâ”€â”€ data_model.py
â”‚   â”œâ”€â”€ db.py
â”‚   â””â”€â”€ data.py
â”œâ”€â”€ save               # ä¿å­˜
â”œâ”€â”€ conf               # é…ç½®
â”‚   â”œâ”€â”€ default.prod.yml
â”‚   â”œâ”€â”€ default.test.yml
â”‚   â””â”€â”€ default.yml
â”œâ”€â”€ script             # è„šæœ¬
â”‚   â””â”€â”€ init_env.sh    # åˆ›å»º Conda ç¯å¢ƒ
â”œâ”€â”€ server             # éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ app.py
â”œâ”€â”€ test               # æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ function_test.py
â”‚   â””â”€â”€ api_test.py
â”œâ”€â”€ doc                # æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ log                # æ—¥å¿—
â”œâ”€â”€ Dockerfile         # Docker æ‰“åŒ…é…ç½®ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ .dockerignore      # Docker å¿½ç•¥é…ç½®ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ .gitignore         # Git å¿½ç•¥é…ç½®
â”œâ”€â”€ requirements.txt   # ä¾èµ–ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ LICENSE            # è®¸å¯
```

### 1.1 README.mdï¼ˆæ–‡æ¡£ï¼‰

**ä¸€ä¸ªè¯¦å°½çš„æ–‡æ¡£æ¯”ä»€ä¹ˆéƒ½é‡è¦ï¼** ä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡æ–‡æ¡£å¿«é€Ÿä¸Šæ‰‹ã€‚ä¹Ÿè®¸ä½ ä¼šè¯´ï¼Œæˆ‘çš„ä»£ç å°±æˆ‘è‡ªå·±çœ‹ï¼Œä¸å†™æ–‡æ¡£ä¹ŸçŸ¥é“ã€‚å¯æ˜¯ä½ èƒ½ä¿è¯ä¸‰ä¸ªæœˆä»¥åï¼Œä½ è¿˜è®°å¾—ä½ å½“åˆå†™çš„ä»€ä¹ˆå—ï¼Ÿï¼

ä¸€ä¸ªå¥½çš„æ·±åº¦å­¦ä¹ é¡¹ç›®æ–‡æ¡£åº”è¯¥æ˜¯æ€æ ·çš„ï¼Ÿ

1. ç¯å¢ƒä¾èµ–è¯´æ˜
2. å¿«é€Ÿè¿è¡Œè„šæœ¬
3. ç±»ä¼¼é¡¹ç›®æ¯”è¾ƒ
4. æ€§èƒ½æµ‹è¯•ç»“æœ
5. ç»†è‡´ç‰ˆæœ¬è®°å½•
6. ç›¸å…³å‚è€ƒèµ„æ–™

å‚è€ƒï¼š

1. [å¦‚ä½•å†™å¥½Githubä¸­çš„readmeï¼Ÿ](https://www.zhihu.com/question/29100816)
2. [å¦‚ä½•ä¸ºä½ çš„å¼€æºé¡¹ç›®ç¼–å†™å®ç”¨çš„æ–‡æ¡£](https://zhuanlan.zhihu.com/p/120399648)

### 1.2 appï¼ˆåº”ç”¨å…¥å£ï¼‰

è¿™é‡Œæ˜¯æ ¸å¿ƒåº”ç”¨çš„å…¥å£ï¼Œæ¯”å¦‚è®­ç»ƒæ–‡ä»¶ `train.py` å’Œæµ‹è¯•æ–‡ä»¶ `test.py`ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŠŠä¸€äº›ä¸­é—´è¿‡ç¨‹æ”¾åœ¨æ­¤å¤„ï¼Œæ¯”å¦‚æå–ç‰¹å¾ `extract_feature.py` ç­‰ã€‚

æ¨èä½¿ç”¨ `python -m app.train` è¿™æ ·çš„æ–¹å¼è¿è¡Œï¼Œä»¥é¿å…å‡ºç° package çš„å¼•ç”¨é—®é¢˜ã€‚

### 1.3 notebookï¼ˆäº¤äº’ç¼–ç¨‹ï½œå¯é€‰ï¼‰

`jupyter notebook` æ˜¯ä¸€ä¸ªé›†æˆäº† `ipython` çš„å¯è§†åŒ–äº¤äº’ä»£ç å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿çš„æŸ¥çœ‹ä¸­é—´å˜é‡å’Œè®°å½•æƒ³æ³•ï¼Œç‰¹åˆ«é€‚åˆåšæ•°æ®å¤„ç†å’Œæ•°æ®å¯è§†åŒ–ã€‚

> çŸ¥åç‚¼ä¸¹å¸ˆæœ‰äº‘ï¼šç‚¼ä¸¹å¸ˆçš„å·¥ä½œåˆ’åˆ†â€”â€”ã€Œ80% æ¸…ç†æ•°æ®ï¼Œ20% è°ƒèŠ‚å‚æ•°ã€

æ•°æ®ç§‘å­¦ä¸¤å…„å¼Ÿâ€”â€”`numpy` å’Œ `pandas` æ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼åœ¨ notebook ä¸­ä¼šå¤§é‡ä½¿ç”¨åˆ°ï½

å¯¹äºå¤§è§„æ¨¡æ•°æ®ï¼Œå»ºè®®å…ˆè¯»å–éƒ¨åˆ†æ•°æ®ï¼Œåœ¨ notebook ä¸Šç¼–å†™æ•°æ®å¤„ç†ç®¡é“ï¼Œæœ€åæŠ½è±¡æˆå‡½æ•°æ”¾åˆ° app ç›®å½•ä¸‹è¿è¡Œã€‚

### 1.4 modelï¼ˆç®—æ³•æ¨¡å‹ï½œå¯é€‰ï¼‰

è¿™é‡Œä¸€èˆ¬æ”¾ã€Œç¥ç»ç½‘ç»œã€æˆ–è€…æ˜¯æœºå™¨å­¦ä¹ çš„ç®—æ³•ç»“æ„ã€‚

æ¯”å¦‚åŒ…å« `torch.nn.Module` çš„æ–‡ä»¶ã€‚

### 1.5 dataï¼ˆæ•°æ®ï¼‰

æ‰€æœ‰çš„æ•°æ®çš„å †æ”¾å¤„ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ã€Œæ•°æ®é›†ã€ã€‚

å¦‚æœæ•°æ®é›†æ¯”è¾ƒå¤§ï¼Œå»ºè®®åœ¨ä¸“é—¨çš„ç£ç›˜ä¸­è¿›è¡Œå­˜å‚¨ç®¡ç†ï¼Œé€šè¿‡è½¯é“¾æ¥çš„æ–¹å¼æ˜ å°„åˆ° ./data ç›®å½•ä¸‹é¢ã€‚

```shell
ln -s /path/to/dataset ./data/dataset
```

> âš ï¸ æ³¨æ„ï¼š
> åˆ é™¤è½¯é“¾æ¥æ˜¯ `rm -rf ./data/dataset`ï¼Œ
> è€Œä¸æ˜¯ `rm -rf ./data/dataset/`ï¼Œ
> ç¬¬äºŒå‘½ä»¤åšæ³•ä¼šæŠŠæºæ•°æ®åˆ æ‰ï¼åˆ‡è®°ï¼åˆ‡è®°ï¼

### 1.6 utilï¼ˆè¾…åŠ©å·¥å…·ï¼‰

ä¸€äº›å¸¸è§çš„è¾…åŠ©å‡½æ•°ï¼Œæ¯”å¦‚ï¼š

1. conf é…ç½®
2. data æ•°æ®
3. data_model æ•°æ®æ¨¡å‹
4. log æ—¥å¿—
5. db æ•°æ®åº“

### 1.7 saveï¼ˆç»“æœä¿å­˜ï¼‰

æ¨¡å‹å‚æ•°ã€æ€§èƒ½æµ‹è¯•ç»“æœç­‰...

### 1.8 confï¼ˆé…ç½®ä¸­å¿ƒï¼‰

æ‰€æœ‰çš„é…ç½®éƒ½æ˜¯ç”¨ `YAML`ï¼Œå®ƒæ¯” `json` æ›´å¥½ç”¨ï¼Œå¯ä»¥åœ¨é…ç½®ä¸­æ·»åŠ æ³¨é‡Šï¼Œå¹¶ä¸”å‘ˆç°æ–¹å¼ä¹Ÿæ›´ä¸ºç›´è§‚ï¼

é…ç½®æ–‡ä»¶çš„ä¸­é—´åç§°æ˜¯ã€Œç¯å¢ƒå˜é‡ã€ï¼Œæ¯”å¦‚ ENV ä¸º `test` æ—¶ï¼Œå°±ä¼šè¯»å– `default.test.yml` æ–‡ä»¶ï¼ˆENV é»˜è®¤ä¸º `dev`ï¼Œä¼šè¯»å– `default.yml`ï¼‰ã€‚

å¦‚ä½•ä½¿ç”¨ç¯å¢ƒå˜é‡ ENV å‘¢ï¼Ÿåªéœ€è¦åœ¨æ‰§è¡Œæ—¶ï¼ŒæŠŠ `ENV=test` æ·»åŠ åˆ°å‘½ä»¤çš„æœ€å‰é¢ã€‚

```
ENV=test python -m app.train
```

### 1.9 scriptï¼ˆå®ç”¨è„šæœ¬ï¼‰

å¯¹äºä¸€äº›å¸¸è§çš„è¿ç»­å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ•´ç†å‡ºæ¥ï¼Œå†™æˆä¸€ä¸ªè„šæœ¬ï¼Œä»¥ä¾¿å¿«é€Ÿæ‰§è¡Œï¼

æ¯”å¦‚ `init_env.sh` å¯ä»¥è®©ä½ å¿«é€Ÿåˆ›å»º conda è™šæ‹Ÿç¯å¢ƒï¼

```shell
bash scripts/init_env.sh
```

### 1.10 serverï¼ˆéƒ¨ç½²ï½œå¯é€‰ï¼‰

ä½¿ç”¨ Web æœåŠ¡éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒï¼Œæ¨èä½¿ç”¨ [Sanic](https://sanic.dev/zh/)ã€‚

```
ENV=prod python -m server.main
```

### 1.11 testï¼ˆæµ‹è¯•ï½œå¯é€‰ï¼‰

ä¸æ¨¡å‹çš„æµ‹è¯•ä¸åŒï¼Œè¿™é‡Œä¸»è¦ä¸ºä»£ç çš„å•å…ƒæµ‹è¯• `UnitTest`ã€‚

`function_test.py` é‡Œé¢æ¼”ç¤ºäº†å¦‚ä½•åšä¸€ä¸ªæœ€ç®€å•çš„å•å…ƒæµ‹è¯•ã€‚

```shell
# æ–¹æ³•1ï¼šä½¿ç”¨ python æ‰§è¡Œ
python -m test.function_test
# æ–¹æ³•ï¼šä½¿ç”¨ pytest æ‰§è¡Œï¼Œpytest èƒ½å¤Ÿè‡ªåŠ¨æ‰¾åˆ°å½“å‰æ–‡ä»¶å¤¹çš„æ‰€æœ‰æµ‹è¯•æ–‡ä»¶
pytest
```

`api_test.py` æ˜¯å¯¹ API æ¥å£è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œå¾—åˆ° QPSï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰ã€‚

`Locust` æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„æµ‹è¯•å·¥å…·ï¼Œå®ƒé™„å¸¦ä¸€ä¸ª WEB ç•Œé¢ï¼Œéå¸¸æ–¹ä¾¿åœ°åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œå‹æµ‹ã€‚

```shell
locust -f test/api_test.py -u 10 -r 1
```

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `http://127.0.0.1:8089`ï¼Œç‚¹å‡» `Start swarming` æŒ‰é’®ï¼Œå°±å¯ä»¥å¼€å§‹å‹æµ‹äº†ï¼

å‚è€ƒï¼š
1. [Python unittest: å•å…ƒæµ‹è¯•æ¡†æ¶](https://docs.python.org/zh-cn/3/library/unittest.html)
2. [Locust: An open source load testing tool.](https://locust.io)

### 1.12 docï¼ˆæ–‡æ¡£ï½œå¯é€‰ï¼‰

å¦‚æœé¡¹ç›®æ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥å°†æ–‡æ¡£æ•´ç†å½’çº³åˆ°è¿™é‡Œã€‚

### 1.13 logï¼ˆæ—¥å¿—ï¼‰

`util/log.py` ä¼šå°†æ—¥å¿—æŒ‰å¤©è®°å½•åˆ°è¿™é‡Œã€‚

### 1.14 requirements.txt ï¼ˆä¾èµ–ï¼‰

é¡¹ç›®æ‰€éœ€è¦çš„ä¾èµ–ï¼Œæ–¹ä¾¿ä¸€é”®å®‰è£…ã€‚

```shell
pip install -r requirements.txt
```

### 1.15 LICENSEï¼ˆè®¸å¯ï½œå¯é€‰ï¼‰

å¦‚æœæ˜¯å¼€æºé¡¹ç›®ï¼Œéœ€è¦æ·»åŠ è®¸å¯è¯ã€‚

å‚è€ƒï¼š

1. [ä¸€æ–‡çœ‹æ‡‚å¼€æºè®¸å¯è¯ä¸¨å¼€æºçŸ¥è¯†ç§‘æ™®](https://pingcap.com/zh/blog/introduction-of-open-source-license)
2. [å¦‚ä½•é€‰æ‹©å¼€æºè®¸å¯è¯ï¼Ÿ](https://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html)

## 2 ç¯å¢ƒå‡†å¤‡

- Ubuntu 18.04 LTS+
- Python 3.7+
- Anaconda 3

> äººç”Ÿè‹¦çŸ­ï¼Œå¿«ç”¨ `*NIX` ï¼

## 3 TODO

- [ ] dspt init è„šæœ¬
- [ ] script ä¸­æ·»åŠ ä¸€äº›å¸¸ç”¨è„šæœ¬

## 4 å‚è€ƒ

- [Ubuntu ç³»ç»Ÿé•œåƒä¸‹è½½](https://cn.ubuntu.com/download)
- [Anaconda ä¸ªäººç‰ˆ](https://www.anaconda.com/products/individual#)
- [TUNA æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™](https://mirrors.tuna.tsinghua.edu.cn/)

## 5 è®¸å¯è¯

[![](https://award.dovolopor.com?lt=License&rt=MIT&rbc=green)](./LICENSE)
